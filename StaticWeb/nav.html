<meta charset="UTF-8">

<div class="container">
    <div class="row navbar navbar-inverse">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#example-navbar-collapse">
                <span class="sr-only">切换导航</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!--<a class="navbar-brand" href="#">菜鸟教程</a>-->
        </div>
        <div class="collapse navbar-collapse" id="example-navbar-collapse">
            <ul id="nav_row" class="nav navbar-nav">
                <li class="active"><a href="/">首页</a></li>
                <li v-for="(ch,index) in list" :code="ch.ch_code"><a :href="'/channel/'+ch.ch_code">{{ch.ch_name}}</a></li>
            </ul>
        </div>
    </div>
</div>
<script>
    var nav=new Vue({
        el:'#nav_row',
        data:{
            list:[]
        },
        updated:function () {
            if(path[path.length-2]=='channel')
                changeNavActive(channelCode);
        }
    });
    var path=location.pathname.split('/');
    var channelCode=path[path.length-1];
    $(function () {
        $('ul.navbar-nav li:first-child').addClass("active");
        $('ul.navbar-nav li').click(function (e){
            $('ul.navbar-nav li').removeClass("active");
            $(this).addClass("active");
        });
        addChannelListListener(addNav);

    });
    function changeNavActive(code) {
        $('ul.navbar-nav li').removeClass("active");
        $("ul.navbar-nav li[code="+code+"]").addClass('active');
    }
    function addNav(data) {
        nav.list=data;
    }
</script>